import{d as f,c as i,b as e,o as n,g as L,x as S,t as k,n as o,k as m,z as I,I as y,w as h,a as d,H as D,_ as M,h as T,s as V,l as R,m as N,J as b,K as H,e as q,B as j,p as A}from"./index-vHkR6Xec.js";import{s as O,a as P}from"./time-Pdvgg59k.js";import{T as F,A as U,M as E,g as J}from"./Media-COzH9Z4j.js";const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},G=f({name:"CommentAltRegular",render:function(w,u){return n(),i("svg",K,u[0]||(u[0]=[e("path",{d:"M448 0H64C28.7 0 0 28.7 0 64v288c0 35.3 28.7 64 64 64h96v84c0 7.1 5.8 12 12 12c2.4 0 4.9-.7 7.1-2.4L304 416h144c35.3 0 64-28.7 64-64V64c0-35.3-28.7-64-64-64zm16 352c0 8.8-7.2 16-16 16H288l-12.8 9.6L208 428v-60H64c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16h384c8.8 0 16 7.2 16 16v288z",fill:"currentColor"},null,-1)]))}}),Q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},W=f({name:"Heart",render:function(w,u){return n(),i("svg",Q,u[0]||(u[0]=[e("path",{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z",fill:"currentColor"},null,-1)]))}}),X={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},z=f({name:"HeartRegular",render:function(w,u){return n(),i("svg",X,u[0]||(u[0]=[e("path",{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3C200.7 23 111.4 15.6 53.6 64.3C-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9c14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7c38.9-32.7 98.9-27.8 136.5 10.5l35 35.7l35-35.7c37.8-38.5 97.8-43.2 136.5-10.6c51.1 43.1 43.5 113.9 7.3 150.8z",fill:"currentColor"},null,-1)]))}}),Y={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Z=f({name:"Link",render:function(w,u){return n(),i("svg",Y,u[0]||(u[0]=[e("path",{d:"M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59c-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0c-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606c.648 17.722 3.826 35.527 9.69 52.721c1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96c28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83c-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37c-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569c-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51c27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612c5.864 17.194 9.042 34.999 9.69 52.721c.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z",fill:"currentColor"},null,-1)]))}}),ee={class:"timeAndAction"},te={key:0,class:"popup"},se=f({__name:"ArticleActions",props:{article:{type:Object,required:!0}},emits:["like","comment"],setup(r,{emit:w}){const u=r,s=L(!1),p=L(!1);function C(){p.value=!p.value}const g=w,a=S(()=>{const t=new Date(u.article.created_at);return isNaN(t.getTime())?0:t.getTime()});return(t,l)=>(n(),i("div",ee,[e("p",{onClick:l[0]||(l[0]=x=>s.value=!s.value)},k(s.value?o(O)(a.value):o(P)(a.value)),1),e("div",{class:"action-wrapper",onClick:C},[l[6]||(l[6]=e("div",{class:"dots-button"},[e("p"),e("p")],-1)),p.value?(n(),i("div",te,[e("div",{class:"popup-item like",onClick:l[1]||(l[1]=x=>g("like"))},[r.article.isLiked?(n(),I(o(y),{key:1,color:"rgb(255,100,100)"},{default:h(()=>[d(o(W))]),_:1})):(n(),I(o(y),{key:0},{default:h(()=>[d(o(z))]),_:1})),e("span",null,k(r.article.isLiked?"取消喜欢":"喜欢"),1)]),l[5]||(l[5]=e("div",{class:"popup-divider"},null,-1)),e("div",{class:"popup-item comment",onClick:[l[2]||(l[2]=D(x=>g("comment"),["stop"])),l[3]||(l[3]=x=>p.value=!p.value)]},[d(o(y),null,{default:h(()=>[d(o(G))]),_:1}),l[4]||(l[4]=e("span",null,"评论",-1))])])):m("",!0)])]))}}),ne=M(se,[["__scopeId","data-v-5439af5f"]]),le={class:"container"},ie={key:0,class:"users"},oe={key:0},ae=["src","onClick"],re={key:0},ce={key:1},ue={key:1,class:"input"},de={class:"comments-container"},me=["onClick"],pe={class:"comment-displayName"},ve={key:0},ke={key:1,class:"comment-displayName"},ge={key:0,class:"input"},we=["placeholder"],ye=f({__name:"Review",props:{article:{type:Object,required:!0},isShowInput:Boolean,hasMore:{type:Boolean,required:!0},remainingComments:{type:Number,required:!0},isLoading:{type:Boolean,required:!0},likers:{type:Array,default:()=>[]},comments:{type:Array,default:()=>[]},loadMore:{type:Function,required:!0}},emits:["send-reply"],setup(r,{emit:w}){const u=T(),s=r,p=$=>{const v=$.target;v.style.height="auto",v.style.height=v.scrollHeight+"px"},C=w,g=L(null),a=L(""),t=$=>{g.value===$?g.value=null:(g.value=$,a.value="")},l=()=>{if(!a.value.trim()){u.show("评论内容不能为空","info",2e3);return}C("send-reply",{articleId:s.article.id,parentId:g.value,content:a.value}),a.value="",g.value=null},x=V(),B=S(()=>x.name==="articleDetail");return($,v)=>(n(),i("div",le,[r.article.like_count!==0?(n(),i("div",ie,[d(o(y),{class:"users-icon"},{default:h(()=>[d(o(z))]),_:1}),(n(!0),i(R,null,N(r.likers,(c,_)=>(n(),i("span",{key:_},[B.value?m("",!0):(n(),i("span",oe,k(c.displayName),1)),B.value?(n(),i("img",{key:1,src:c.avatar,alt:"",style:{width:"25px",height:"25px","margin-right":"5px",cursor:"pointer"},onClick:Ie=>o(A).push(`/home/${c.username}`)},null,8,ae)):m("",!0)]))),128)),r.likers.length!==0?(n(),i("span",re,"...共")):m("",!0),r.article.like_count!==0?(n(),i("span",ce,k(r.article.like_count)+"人喜欢",1)):m("",!0)])):m("",!0),s.isShowInput?(n(),i("div",ue,[b(e("textarea",{"onUpdate:modelValue":v[0]||(v[0]=c=>a.value=c),placeholder:"写下你的评论...",onInput:p},null,544),[[H,a.value]]),e("button",{onClick:l},"发送")])):m("",!0),e("div",de,[(n(!0),i(R,null,N(r.comments,c=>(n(),i("div",{class:"comment",key:c.id},[e("div",{onClick:_=>t(c.id)},[e("span",pe,k(c.user.nickname||c.user.username),1),c.parent_id?(n(),i("span",ve," 回复")):m("",!0),c.parent_id?(n(),i("span",ke,k(c.parent_displayName),1)):m("",!0),v[3]||(v[3]=e("span",null,"：",-1)),e("span",null,k(c.content),1)],8,me),g.value===c.id?(n(),i("div",ge,[b(e("textarea",{"onUpdate:modelValue":v[1]||(v[1]=_=>a.value=_),placeholder:`回复${c.user.nickname||c.user.username}`,onInput:p},null,40,we),[[H,a.value]]),e("button",{onClick:l},"发送")])):m("",!0)]))),128)),r.hasMore?(n(),i("span",{key:0,class:"load-more",onClick:v[2]||(v[2]=(...c)=>r.loadMore&&r.loadMore(...c))},[e("div",null,[q(k(r.remainingComments)+"条回复 ",1),d(o(y),null,{default:h(()=>[d(o(j))]),_:1})])])):m("",!0)])]))}}),he=M(ye,[["__scopeId","data-v-0afd66e4"]]),fe={key:0,class:"article-item"},Ce=["src"],xe={class:"article-context"},$e={class:"nickname"},_e={class:"tags"},Ae={class:"ad-title"},Le={class:"media"},Me={class:"review"},Be=f({__name:"ArticleItem",props:{article:{},likers:{},comments:{},isShowInput:{type:Boolean},hasMoreComments:{type:Boolean},remainingComments:{},isLoadingComments:{type:Boolean}},emits:["like","comment","send-reply","load-more-comments"],setup(r,{emit:w}){const u=T(),s=r,p=w;async function C(){try{const t=(await J())?.result;console.log(t)}catch(a){console.log("@error",a)}}function g(a){window.open(a,"_blank","noopener,noreferrer")}return(a,t)=>s.article?(n(),i("div",fe,[e("div",{class:"article-avatar",onClick:t[0]||(t[0]=l=>o(A).push(`/home/${s.article.user.username}`))},[e("img",{src:s.article.user?.avatar,alt:"avatar"},null,8,Ce)]),e("div",xe,[e("div",$e,[e("div",{onClick:t[1]||(t[1]=l=>o(A).push(`/home/${s.article.user.username}`))},[e("p",null,k(s.article.user?.nickname||s.article.user.username),1)]),e("div",_e,[s.article.is_top?(n(),i("div",{key:0,class:"tag-item",onClick:t[2]||(t[2]=l=>o(u).show("该内容为置顶内容","info",2e3))},[d(o(y),{class:"tag-icon"},{default:h(()=>[d(o(F))]),_:1}),t[9]||(t[9]=e("span",null,"置顶",-1))])):m("",!0),s.article.is_ad?(n(),i("div",{key:1,class:"tag-item",onClick:t[3]||(t[3]=l=>o(u).show("该内容为广告内容","info",2e3))},[d(o(y),{class:"tag-icon"},{default:h(()=>[d(o(U))]),_:1}),t[10]||(t[10]=e("span",null,"广告",-1))])):m("",!0)])]),a.article.content?(n(),i("div",{key:0,class:"main-context",onClick:t[4]||(t[4]=l=>o(A).push(`/article/${s.article.id}`))},[e("p",null,k(s.article.content),1)])):m("",!0),a.article.is_ad&&a.article.ad_url?(n(),i("div",{key:1,class:"ad-container",onClick:t[5]||(t[5]=l=>g(a.article.ad_url))},[d(o(y),{class:"ad-icon"},{default:h(()=>[d(o(Z))]),_:1}),e("span",Ae,k(a.article.ad_title),1)])):m("",!0),e("div",Le,[d(E,{"article-images":s.article.article_images,"article-videos":s.article.article_videos},null,8,["article-images","article-videos"])]),e("div",{class:"location",onClick:C},[e("p",null,k(s.article.location),1)]),d(ne,{article:s.article,onLike:t[6]||(t[6]=l=>p("like",s.article.id)),onComment:t[7]||(t[7]=l=>p("comment"))},null,8,["article"]),e("div",Me,[d(he,{article:s.article,likers:s.likers,comments:s.comments,"is-show-input":s.isShowInput,"has-more":s.hasMoreComments,"is-loading":s.isLoadingComments,"remaining-comments":s.remainingComments,"load-more":()=>p("load-more-comments"),onSendReply:t[8]||(t[8]=l=>p("send-reply",l))},null,8,["article","likers","comments","is-show-input","has-more","is-loading","remaining-comments","load-more"])])])])):m("",!0)}}),He=M(Be,[["__scopeId","data-v-a92e3849"]]);export{He as A};
