import{d as p,u as m,h as c,i as f,p as g,c as _,b as t,J as n,K as r,n as a,X as x,W as v,o as S,_ as b}from"./index-vHkR6Xec.js";import{u as y}from"./setting-DT6Rv-hw.js";const M={class:"basic-container"},U={class:"item"},h={class:"item"},w={class:"item"},C={class:"item"},T={class:"item"},V=p({__name:"Email",setup(k){const d=m(),i=c(),s=y();f(async()=>{const l=i.show("正在加载信息中","loading");await s.getAllConfig()?i.update(l,{type:"success",text:"加载成功",duration:2e3}):(i.update(l,{type:"error",text:"加载信息失败",duration:2e3}),d.handleLogout(),g.replace({name:"index"}))});const u=async()=>{if(s.hasChanged()){const l=s.getUpdateData(),e=i.show("正在更新中...","loading");try{await v(l),i.update(e,{type:"success",text:"更新成功",duration:2e3}),Object.assign(s.originalData,s.configs)}catch(o){i.update(e,{type:"error",text:"更新失败",duration:2e3}),console.error("更新失败:",o)}}else i.show("数据未改动","info",2e3)};return(l,e)=>(S(),_("div",M,[t("div",U,[e[5]||(e[5]=t("label",{for:"mail_host"},"SMTP服务器地址：",-1)),n(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>a(s).configs.mail_host=o),id:"mail_host",type:"text",placeholder:"示例：smtp.qq.com"},null,512),[[r,a(s).configs.mail_host]])]),t("div",h,[e[6]||(e[6]=t("label",{for:"mail_port"},"SMTP服务器端口：",-1)),n(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>a(s).configs.mail_port=o),id:"mail_port",type:"text",placeholder:"服务端口，如465、25"},null,512),[[r,a(s).configs.mail_port]])]),t("div",w,[e[7]||(e[7]=t("label",{for:"mail_user"},"SMTP用户邮箱：",-1)),n(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>a(s).configs.mail_user=o),id:"mail_user",type:"text",placeholder:"如huihost@vip.qq.com"},null,512),[[r,a(s).configs.mail_user]])]),t("div",C,[e[8]||(e[8]=t("label",{for:"mail_pass"},"SMTP用户密码：",-1)),n(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>a(s).configs.mail_pass=o),id:"mail_pass",type:"text",placeholder:"SMTP授权码"},null,512),[[r,a(s).configs.mail_pass]])]),t("div",T,[e[10]||(e[10]=t("label",{for:"mail_secure"},"邮箱SSL加密：",-1)),t("div",null,[n(t("input",{type:"checkbox",id:"mail_secure","onUpdate:modelValue":e[4]||(e[4]=o=>a(s).configs.mail_secure=o),"true-value":"true","false-value":"false"},null,512),[[x,a(s).configs.mail_secure]]),e[9]||(e[9]=t("label",{for:"mail_secure"},"开启加密",-1))])]),t("button",{onClick:u},"更 新")]))}}),D=b(V,[["__scopeId","data-v-193b149a"]]);export{D as default};
