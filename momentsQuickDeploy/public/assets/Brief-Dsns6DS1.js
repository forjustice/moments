import{d as w,c as i,o as a,b as e,C as M,g as x,q as B,i as H,z as S,w as k,k as y,a as p,n as s,I as $,T as O,e as N,t as g,l as T,m as D,D as G,_ as z,E as R,u as V,x as _,j as q,A as b,G as L,p as j}from"./index-vHkR6Xec.js";import{U as F}from"./UserCircleRegular-DcZmVKiu.js";const P={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},J=w({name:"Camera",render:function(c,o){return a(),i("svg",P,o[0]||(o[0]=[e("path",{d:"M512 144v288c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V144c0-26.5 21.5-48 48-48h88l12.3-32.9c7-18.7 24.9-31.1 44.9-31.1h125.5c20 0 37.9 12.4 44.9 31.1L376 96h88c26.5 0 48 21.5 48 48zM376 288c0-66.2-53.8-120-120-120s-120 53.8-120 120s53.8 120 120 120s120-53.8 120-120zm-32 0c0 48.5-39.5 88-88 88s-88-39.5-88-88s39.5-88 88-88s88 39.5 88 88z",fill:"currentColor"},null,-1)]))}}),K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Q=w({name:"Hive",render:function(c,o){return a(),i("svg",K,o[0]||(o[0]=[e("path",{d:"M260.353 254.878L131.538 33.1a2.208 2.208 0 0 0-3.829.009L.3 254.887a2.234 2.234 0 0 0 0 2.235L129.116 478.9a2.208 2.208 0 0 0 3.83-.009l127.412-221.778a2.239 2.239 0 0 0-.005-2.235zm39.078-25.713a2.19 2.19 0 0 0 1.9 1.111h66.509a2.226 2.226 0 0 0 1.9-3.341L259.115 33.111a2.187 2.187 0 0 0-1.9-1.111h-66.508a2.226 2.226 0 0 0-1.9 3.341zM511.7 254.886L384.9 33.112A2.2 2.2 0 0 0 382.99 32h-66.6a2.226 2.226 0 0 0-1.906 3.34L440.652 256L314.481 476.66a2.226 2.226 0 0 0 1.906 3.34h66.6a2.2 2.2 0 0 0 1.906-1.112L511.7 257.114a2.243 2.243 0 0 0 0-2.228zm-145.684 30.031h-66.508a2.187 2.187 0 0 0-1.9 1.111l-108.8 190.631a2.226 2.226 0 0 0 1.9 3.341h66.509a2.187 2.187 0 0 0 1.9-1.111l108.8-190.631a2.226 2.226 0 0 0-1.901-3.341z",fill:"currentColor"},null,-1)]))}}),W=()=>M({url:"/link",method:"get"}),X={key:0,class:"link-container"},Y={class:"header"},Z={class:"link-header"},ee={class:"link-header-top"},se=["src"],te={class:"link-header-bottom"},oe={class:"link-content"},ne=["onClick"],ae=["src"],re=w({__name:"Link",setup(f,{expose:c}){const o=x(!1),m=()=>{o.value=!o.value},u=B(),d=x([]);function h(r){window.open(r,"_blank","noopener,noreferrer")}return H(async()=>{try{const r=await W();d.value=r.data}catch(r){console.error("加载链接数据失败:",r)}}),c({toggleShowLink:m}),(r,t)=>(a(),S(G,{name:"slide"},{default:k(()=>[o.value?(a(),i("div",X,[e("div",Y,[t[1]||(t[1]=e("span",null,"友情链接",-1)),p(s($),{class:"icon",onClick:t[0]||(t[0]=n=>o.value=!1)},{default:k(()=>[p(s(O),{class:"close"})]),_:1})]),e("div",Z,[e("div",ee,[e("img",{src:s(u).configs.site_logo?s(u).configs.site_logo:s(u).configs.site_avatar,alt:"站点LOGO"},null,8,se),N(" "+g(s(u).configs.sitename),1)]),e("div",te,g(s(u).configs.link_brief),1)]),e("div",oe,[e("ul",null,[(a(!0),i(T,null,D(d.value,n=>(a(),i("li",null,[e("div",{class:"link-item",onClick:C=>h(n.url)},[e("img",{src:n.logo?n.logo:"/img/avatar.jpg",alt:"友联LOGO"},null,8,ae),e("div",null,g(n.sitename),1),e("div",null,g(n.brief?n.brief:"暂时未设置站点介绍"),1)],8,ne)]))),256))])])])):y("",!0)]),_:1}))}}),le=z(re,[["__scopeId","data-v-735697e3"]]),ie={class:"header"},ce={class:"background"},ue=["src"],de=["src"],ve={class:"top-bar-wrapper"},_e={class:"top-bar-left"},pe={class:"top-bar-right"},A="/img/background.mp4",ge=w({__name:"Header",props:{headerBackgroundUrl:String},setup(f){const c=R(),o=V(),m=B(),u=f,d=_(()=>u.headerBackgroundUrl||m.configs.site_header_background||A),h=_(()=>{const v=["jpg","png","webp","svg","gif","avif","jpeg"],l=d.value.split(".").pop()?.toLowerCase();return l?v.includes(l):!1}),r=_(()=>{const v=["mp4","webm","ogg","mov"],l=d.value.split(".").pop()?.toLowerCase();return l?v.includes(l):!1}),t=x(!1);let n=null;const C=x(null),E=()=>{C.value?.toggleShowLink()};H(()=>{const v=document.querySelector(".header");v&&(n=new IntersectionObserver(l=>{const U=l[0];t.value=!U.isIntersecting},{root:null,threshold:0}),n.observe(v))}),q(()=>{n&&n.disconnect()});const I=_(()=>!!o.token);return(v,l)=>(a(),i("div",ie,[p(le,{ref_key:"linkRef",ref:C},null,512),e("div",ce,[h.value?(a(),i("img",{key:0,src:d.value,alt:"顶部图片"},null,8,ue)):r.value?(a(),i("video",{key:1,src:d.value,autoplay:"",muted:"",loop:"",playsinline:""},null,8,de)):(a(),i("video",{key:2,src:A,autoplay:"",muted:"",loop:"",playsinline:""}))]),e("div",ve,[e("div",{class:b(["top-bar",{blurred:t.value}])},[e("div",_e,[L(v.$slots,"left",{isBlurred:t.value},()=>[p(s($),{class:b(["icon",{blurred:t.value}]),title:"登录/注册"},{default:k(()=>[I.value?y("",!0):(a(),S(s(F),{key:0,onClick:s(c).showAuth},null,8,["onClick"]))]),_:1},8,["class"])],!0)]),e("div",pe,[L(v.$slots,"right",{isBlurred:t.value},()=>[e("div",{class:"addArticle",onClick:l[0]||(l[0]=U=>s(j).push({name:"post"}))},[I.value?(a(),S(s($),{key:0,class:b(["icon",{blurred:t.value}]),title:"发表文章"},{default:k(()=>[p(s(J))]),_:1},8,["class"])):y("",!0)]),e("div",{class:"link",onClick:E},[p(s($),{class:b(["icon",{blurred:t.value}]),title:"友情链接"},{default:k(()=>[p(s(Q))]),_:1},8,["class"])])],!0)])],2)])]))}}),Ce=z(ge,[["__scopeId","data-v-13cbc699"]]),fe={class:"brief"},me={class:"brief-img"},he=["src"],ke="瞬刻",we="/img/avatar.jpg",be="更简洁、更现代化的内容发布平台",$e=w({__name:"Brief",setup(f){const c=B(),o=V(),m=_(()=>c.configs.sitename||ke),u=_(()=>c.configs.site_avatar||we),d=_(()=>c.configs.site_brief||be),h=_(()=>o.profile?.username??"admin");return(r,t)=>(a(),i("div",fe,[e("div",me,[L(r.$slots,"brief-img",{},()=>[e("span",null,g(m.value),1),e("img",{src:u.value,alt:"avatar",onClick:t[0]||(t[0]=n=>s(j).push(`/home/${h.value}`))},null,8,he)],!0)]),e("p",null,[L(r.$slots,"brief-content",{},()=>[N(g(d.value),1)],!0)])]))}}),Se=z($e,[["__scopeId","data-v-1377332d"]]);export{Se as B,Ce as H};
