import{d as g,c as r,b as u,o as a,h as b,g as k,i as H,j as B,k as d,a as m,n as v,I as x,w as y,l as E,m as N,z as P,H as T,_ as R}from"./index-vHkR6Xec.js";const S={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},te=g({name:"Ad",render:function(o,t){return a(),r("svg",S,t[0]||(t[0]=[u("path",{d:"M157.52 272h36.96L176 218.78L157.52 272zM352 256c-13.23 0-24 10.77-24 24s10.77 24 24 24s24-10.77 24-24s-10.77-24-24-24zM464 64H48C21.5 64 0 85.5 0 112v288c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48zM250.58 352h-16.94c-6.81 0-12.88-4.32-15.12-10.75L211.15 320h-70.29l-7.38 21.25A16 16 0 0 1 118.36 352h-16.94c-11.01 0-18.73-10.85-15.12-21.25L140 176.12A23.995 23.995 0 0 1 162.67 160h26.66A23.99 23.99 0 0 1 212 176.13l53.69 154.62c3.61 10.4-4.11 21.25-15.11 21.25zM424 336c0 8.84-7.16 16-16 16h-16c-4.85 0-9.04-2.27-11.98-5.68c-8.62 3.66-18.09 5.68-28.02 5.68c-39.7 0-72-32.3-72-72s32.3-72 72-72c8.46 0 16.46 1.73 24 4.42V176c0-8.84 7.16-16 16-16h16c8.84 0 16 7.16 16 16v160z",fill:"currentColor"},null,-1)]))}}),q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},M=g({name:"Plus",render:function(o,t){return a(),r("svg",q,t[0]||(t[0]=[u("path",{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z",fill:"currentColor"},null,-1)]))}}),j={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 384 512"},ne=g({name:"Thumbtack",render:function(o,t){return a(),r("svg",j,t[0]||(t[0]=[u("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24c-.001-51.183-37.983-91.42-85.973-113.733z",fill:"currentColor"},null,-1)]))}}),F={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 448 512"},O=g({name:"TrashAltRegular",render:function(o,t){return a(),r("svg",F,t[0]||(t[0]=[u("path",{d:"M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z",fill:"currentColor"},null,-1)]))}}),U="http://localhost:9889/api";async function ae(){try{const e=await fetch(`${U}/location`),{data:{data:o}}=await e.json();if(console.log(o),e.status!=200)throw new Error("获取 IP 地址服务响应失败");return{result:o}}catch(e){console.error("获取 IP 地址失败:",e)}}const G={class:"container"},J={key:1},K=["onClick","onDragstart","onDrop"],Q={class:"image-wrapper"},W=["src","onClick"],X=["src","poster"],Y=["src"],Z=g({__name:"Media",props:{articleImages:{type:Array,required:!0},articleVideos:{type:Array,required:!0},upload:{type:Boolean,default:!1},uploadNumber:{type:String,required:!1}},emits:["update:articleImages","add:file","remove:image"],setup(e,{emit:o}){const t=b(),s=e,_=o,h=k(null);function $(n){s.upload&&(h.value=n)}function L(n){s.upload&&n.preventDefault()}function z(n){if(!s.upload||h.value===null||h.value===n)return;const i=h.value,l=[...s.articleImages];[l[i],l[n]]=[l[n],l[i]],_("update:articleImages",l)}function A(){h.value=null}const f=k(null),C=n=>{f.value=n},D=()=>{f.value=null},c=k(null),V=()=>t.show("播放视频","info",2e3),I=()=>t.show("暂停视频","info",2e3);return H(()=>{c.value&&(c.value.addEventListener("play",V),c.value.addEventListener("pause",I))}),B(()=>{c.value&&(c.value.removeEventListener("play",V),c.value.removeEventListener("pause",I))}),(n,i)=>(a(),r("div",G,[s.upload&&e.articleImages.length===0&&e.articleVideos.length===0?(a(),r("div",{key:0,class:"add-file",onClick:i[0]||(i[0]=l=>n.$emit("add:file"))},[m(v(x),null,{default:y(()=>[m(v(M))]),_:1})])):d("",!0),e.articleImages.length!==0?(a(),r("ul",J,[(a(!0),r(E,null,N(e.articleImages,(l,p)=>(a(),r("li",{key:l.id,onClick:w=>C(l.image_url),onDragstart:w=>$(p),onDragover:L,onDrop:w=>z(p),onDragend:A},[u("div",Q,[u("img",{src:l.image_url,alt:"文章图片",onClick:w=>C(l.image_url)},null,8,W),s.upload?(a(),P(v(x),{key:0,class:"delete-btn",onClick:T(w=>n.$emit("remove:image",p),["stop"])},{default:y(()=>[m(v(O))]),_:2},1032,["onClick"])):d("",!0)])],40,K))),128)),s.upload&&e.articleImages.length<Number(s.uploadNumber)?(a(),r("div",{key:0,class:"add-file",onClick:i[1]||(i[1]=l=>n.$emit("add:file"))},[m(v(x),null,{default:y(()=>[m(v(M))]),_:1})])):d("",!0)])):d("",!0),e.articleVideos.length!==0&&e.articleImages.length===0?(a(),r("video",{key:2,src:e.articleVideos[0]?.video_url,ref_key:"videoRef",ref:c,poster:e.articleVideos[0].thumbnail_url,muted:"",playsinline:"",controls:""},null,8,X)):d("",!0),f.value?(a(),r("div",{key:3,class:"overlay",onClick:D},[u("img",{src:f.value,class:"enlarged",alt:"放大图片"},null,8,Y)])):d("",!0)]))}}),le=R(Z,[["__scopeId","data-v-18febfb5"]]);export{te as A,le as M,ne as T,ae as g};
